# ENTERPRISE_ERP Oracle 마이그레이션 전략 리포트

---

## 리포트 개요

**추천 타겟**: RDS for Oracle SE2

**추천 신뢰도**: 75%

**소스 데이터베이스**: ENTERPRISE_ERP (Oracle 19.0.0.0.0)

**분석 소스**: AWR, PL/SQL

**분석 일시**: 2026-01-31

---

## 📊 분석 신뢰도 및 데이터 가용성

### 종합 신뢰도: 🟢 **75%** (높음)

```
[███████████████░░░░░] 75%
```

### 분석 모드: **DB_ONLY**

### 데이터 가용성

| 데이터 소스 | 상태 | 파일 수 | 신뢰도 기여 |
|------------|------|--------|------------|
| 서비스 SQL | ❌ 미포함 | - | 추정값 사용 |
| PL/SQL | ✅ 포함 | 9개 | 75% |
| DBCSI (AWR) | ✅ 포함 | - | 90% |


## 데이터베이스 개요

### 기본 정보

| 항목 | 값 | 설명 |
|------|-----|------|
| 데이터베이스 이름 | ENTERPRISE_ERP | 대규모 ERP 시스템 |
| Oracle 버전 | 19.0.0.0.0 | Enterprise Edition |
| 문자셋 | AL32UTF8 | UTF8 호환 |
| 인스턴스 수 | 2 (RAC) | 고가용성 RAC 구성 |

### 크기 및 리소스 정보

| 항목 | 값 | 설명 |
|------|-----|------|
| 전체 DB 크기 | 3,305.0 GB | 대규모 DB |
| 물리 메모리 | 256.0 GB | 서버 총 메모리 |
| CPU 코어 수 | 8 | 물리 CPU 코어 |

### PL/SQL 오브젝트

| 오브젝트 유형 | 개수 | 변환 난이도 | 설명 |
|-------------|------|------------|------|
| 패키지 | 103 | 🔴 높음 | 여러 프로시저/함수를 묶은 모듈 |
| 프로시저 | 1,055 | 🟠 중간 | 비즈니스 로직 처리 단위 |
| 함수 | 715 | 🟠 중간 | 값을 계산하여 반환하는 프로그램 단위 |
| 트리거 | 1,036 | 🟠 중간 | 이벤트 기반 자동 실행 |
| 타입 | 114 | 🔴 높음 | 사용자 정의 데이터 타입 |
| **총 PL/SQL 오브젝트 수** | **3,025** | - | 변환 대상 프로그램 오브젝트 총합 |
| **총 PL/SQL 라인 수** | **1,159,745** | - | 변환 작업량 산정의 기준 |

### 스키마 오브젝트

| 오브젝트 유형 | 개수 | 변환 방법 |
|-------------|------|----------|
| 스키마 | 34 | SCT 자동 변환 |
| 테이블 | 5,062 | SCT 자동 변환 |
| 뷰 | 746 | 일부 수동 검토 |
| 인덱스 | 8,561 | SCT 자동 변환 |
| 시퀀스 | 701 | SCT 자동 변환 |
| LOB | 1,180 | SCT 자동 변환 |
| DB Link | 3 | 아키텍처 검토 |


# 추천 전략

**Replatform (리플랫폼)** → RDS for Oracle SE2

## Replatform 세부 전략

| 옵션 | 설명 | 적합한 경우 | 관리 부담 |
|------|------|------------|----------|
| **EC2 Rehost** | EC2에서 Oracle 직접 운영 | RAC 필요, OS 커스터마이징 필요 | 🔴 높음 |
| **RDS Custom** | OS 접근 가능한 관리형 서비스 | OS 접근 필요 | 🟠 중간 |
| **RDS Oracle** | 완전 관리형 서비스 | 표준 구성, 운영 부담 최소화 | 🟢 낮음 |

### 선택된 세부 전략: **RDS for Oracle SE2**

**선택 이유:**
- 표준 Oracle 기능 사용으로 관리형 RDS 적합
- AWS 관리형 서비스로 운영 부담 최소화
- 현재 RAC 구성이지만 워크로드 분석 결과 Multi-AZ + Read Replica로 대체 가능

## Replatform 선택 이유

| 조건 | 설명 |
|------|------|
| PL/SQL 코드량 | 1,159,745줄 - 오픈소스 전환 시 변환 비용이 매우 큼 |
| 오브젝트 개수 | PL/SQL 오브젝트 3,025개 - 변환 대상이 매우 많음 |
| RAC 구성 | 2 인스턴스 RAC → Multi-AZ로 대체 가능 |
| DB Link | 3개 - 재설계 필요하나 관리 가능한 수준 |


# 추천 근거

## PL/SQL 복잡도

### 분석 대상 오브젝트

| 오브젝트 타입 | 개수 | PostgreSQL 기본점수 | MySQL 기본점수 |
|--------------|------|-------------------|----------------|
| 패키지 | 103개 | 4.0 | 5.0 |
| 함수 | 715개 | 2.0 | 3.0 |
| 트리거 | 1개 | 3.5 | 4.5 |
| 타입 | 2개 | 2.5 | 3.5 |
| **합계** | **821개** | - | - |

### 타겟 DB별 복잡도 비교

| 항목 | PostgreSQL | MySQL |
|------|------------|-------|
| 평균 복잡도 | 4.72 (중간) | 5.19 (중간) |
| 최대 복잡도 | 9.25 (매우 높음) | 8.13 (매우 높음) |
| 고난이도 | 5개 / 9개 (≥5.0) | 2개 / 8개 (≥7.0) |

### 감지된 Oracle 특화 기능

| Oracle 기능 | 사용 횟수 | 변환 영향도 |
|------------|----------|------------|
| NESTED TABLE | 5회 | 🔴 높음 |
| REF CURSOR | 2회 | 🟠 중간 |
| PRAGMA | 2회 | 🟠 중간 |
| PIPELINED | 1회 | 🔴 높음 |
| AUTONOMOUS_TRANSACTION | 1회 | 🔴 높음 |
| OBJECT TYPE | 1회 | 🔴 높음 |

### 감지된 외부 의존성

| 패키지/함수 | 사용 횟수 | 대체 방법 |
|------------|----------|----------|
| UTL_FILE | 1회 | COPY 명령 / LOAD DATA |
| DBMS_SCHEDULER | 1회 | pg_cron / Event Scheduler |
| DBMS_LOB | 1회 | 네이티브 LOB 함수 |
| DBMS_OUTPUT | 1회 | RAISE NOTICE / SELECT |
| DBMS_LOCK | 1회 | Advisory Lock / GET_LOCK |
| DBMS_STATS | 1회 | ANALYZE / ANALYZE TABLE |
| DBMS_AQ | 1회 | 개별 검토 필요 |
| UTL_HTTP | 1회 | http 확장 / 애플리케이션 레이어 |
| UTL_SMTP | 1회 | 개별 검토 필요 |

## 작업 예상 시간

| 항목 | 값 |
|------|-----|
| PL/SQL 오브젝트 수 | 818개 |
| PL/SQL 총 라인 수 | 1,159,745줄 |

### 예상 작업 시간 (Replatform - 4인 팀 기준)

| 작업 방식 | 예상 기간 | 비고 |
|----------|----------|------|
| Replatform (RDS Oracle) | 2~4주 | 코드 변경 없음, 인프라 전환만 |
| Refactoring (참고) | 31~51일 (1.5~2.6개월) | 오브젝트당 4시간 × 30~50% |


# 최종 난이도 판정

**종합 난이도**: 높음 (High) - Refactoring 기준

## 난이도 점수 산정 기준

| 평가 항목 | 현재 값 | 획득 점수 |
|----------|--------|----------|
| PL/SQL 평균 복잡도 | 4.72 (중간) | 1점 |
| PL/SQL 코드량 | 1,159,745줄 (매우 많음) | 3점 |
| 고난이도 비율 (≥5.0) | 5/9개 (55.6%) | 2점 |
| 고난이도 절대 개수 | 5개 (적음) | 0점 |
| 패키지 개수 | 103개 (많음) | 2점 |
| **합계** | - | **8점** |

> **난이도 등급 기준**: 0~2점 낮음, 3~5점 중간, 6~8점 높음, 9점 이상 매우 높음

## 판정 요약

- 🟡 PL/SQL 평균 복잡도가 중간 수준
- ⚠️ PL/SQL 코드량이 매우 많음 (1,159,745줄)
- ⚠️ 고난이도 오브젝트 5개 존재 (복잡도 ≥5.0)
- ⚠️ 패키지 103개: 변환 난이도가 가장 높은 오브젝트
- → Refactoring 난이도가 높아 **Replatform 권장**


# 대안 전략

## 대안 1: Aurora PostgreSQL (Refactoring)

### 장점
- Oracle 라이선스 비용 완전 제거 (TCO 40~60% 절감)
- PL/pgSQL로 대부분의 PL/SQL 로직 변환 가능
- 클라우드 네이티브 기능 활용
### 단점
- PL/SQL → PL/pgSQL 변환 작업 필요 (1,159,745줄)
- 고난이도 오브젝트 5개 존재
- 예상 기간 31~51일 (4인 팀, AI 활용)
### 고려사항
- ✅ 장기적 비용 절감이 중요한 경우
- ⚠️ 충분한 변환 및 테스트 기간 확보 필요

## 대안 2: Aurora MySQL (Refactoring)

### 장점
- 가장 낮은 TCO
- 단순한 아키텍처로 운영 용이
### 단점
- 모든 PL/SQL을 애플리케이션 코드로 이관 필요
- 저장 프로시저 기능 제한적
- 대규모 애플리케이션 코드 변경 필요
### 고려사항
- ⚠️ PL/SQL 코드량이 매우 많아 비현실적


# 위험 요소 및 완화 방안

## 위험 1: RAC 구성을 RDS Single 인스턴스로 전환 필요

**카테고리**: operational

**심각도**: high

**완화 방안**: Multi-AZ로 고가용성 확보, Read Replica로 읽기 분산

## 위험 2: RDS Oracle SE2는 RAC 미지원

**카테고리**: operational

**심각도**: high

**완화 방안**: Multi-AZ 배포로 장애 대응, Read Replica로 읽기 부하 분산

## 위험 3: Oracle 라이선스 비용 지속 발생

**카테고리**: cost

**심각도**: medium

**완화 방안**: 장기적으로 Refactoring 전략 재검토, 라이선스 최적화

## 위험 4: Multi-AZ 구성 시 Oracle 라이선스 비용 2배

**카테고리**: cost

**심각도**: medium

**완화 방안**: HA 요구사항 대비 비용 효과 분석


# 인스턴스 추천

## 권장 인스턴스 타입

- **인스턴스 타입**: db.r6i.8xlarge
- **vCPU**: 32
- **메모리**: 256 GB
- **적용 여유율**: 20%

### 추천 근거

**AWR/Statspack 분석 결과**:
- 평균 CPU 사용률: 47.1%
- 평균 I/O 부하: 103.0 IOPS
- 평균 메모리 사용량: 180.9 GB

## 인스턴스 추천 비교

| 구분 | 현재 서버 사양 기반 | SGA 권장사항 기반 |
|------|---------------------|-------------------|
| **인스턴스 타입** | db.r6i.8xlarge | db.r6i.4xlarge |
| **vCPU** | 32 | 16 |
| **메모리** | 256 GB | 128 GB |

### SGA 분석 결과

| 항목 | 값 |
|------|-----|
| **현재 SGA 크기** | 160 GB |
| **권장 SGA 크기** | 200 GB |
| **SGA 증가율** | 25.0% |


---

## 요약

| 항목 | 내용 |
|------|------|
| **추천 전략** | RDS for Oracle SE2 (Replatform) |
| **예상 기간** | 2~4주 (인프라 전환) |

### 핵심 이점
- 코드 변경 최소화로 마이그레이션 위험 감소
- 기존 Oracle 기능 및 성능 유지
- AWS 관리형 서비스로 운영 부담 최소화

### 주요 위험
- Oracle 라이선스 비용 지속 발생
- Single 인스턴스 제약 (RAC 미지원)
- 장기적으로 클라우드 네이티브 이점 제한적
