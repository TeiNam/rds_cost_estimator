# FINANCE_CORE Oracle 마이그레이션 전략 리포트

---

## 리포트 개요

**추천 타겟**: RDS for SQL Server Enterprise

**추천 신뢰도**: 70%

**소스 데이터베이스**: FINANCE_CORE (Oracle 19.0.0.0.0)

**분석 소스**: AWR, PL/SQL

**분석 일시**: 2026-02-20

---

## 목차

### Part 1: 의사결정 정보
1. [분석 신뢰도](#-분석-신뢰도-및-데이터-가용성)
2. [데이터베이스 개요](#데이터베이스-개요)
3. [Oracle 기능 사용 현황](#oracle-기능-사용-현황)
4. [추천 전략 및 근거](#추천-전략)
5. [최종 난이도 판정](#최종-난이도-판정)
6. [대안 전략 비교](#대안-전략)
7. [위험 요소 및 완화 방안](#위험-요소-및-완화-방안)

### Part 2: 기술 상세 (부록)
- [인스턴스 추천](#인스턴스-추천)
- [분석 메트릭](#분석-메트릭-부록)


## 📊 분석 신뢰도 및 데이터 가용성

> 이 섹션은 분석 결과의 신뢰도와 그 근거를 설명합니다.

### 종합 신뢰도: 🟠 **70%** (보통)

```
[██████████████░░░░░░] 70%
```

### 분석 모드: **DB_ONLY**

**DB-Only 모드**는 서비스 SQL 없이 PL/SQL과 DBCSI 데이터만으로 분석합니다.

### 데이터 가용성

| 데이터 소스 | 상태 | 파일 수 | 신뢰도 기여 |
|------------|------|--------|------------|
| 서비스 SQL | ❌ 미포함 | - | 추정값 사용 |
| PL/SQL | ✅ 포함 | 8개 | 70% |
| DBCSI (AWR) | ✅ 포함 | - | 90% |

### 항목별 신뢰도 상세

| 분석 항목 | 신뢰도 | 데이터 출처 | 설명 |
|----------|--------|------------|------|
| SQL 복잡도 | 55% | 없음 (추정값) | ORM 기반 단순 CRUD 가정 |
| PL/SQL 복잡도 | 70% | 파일 분석 | 실측값 기반 분석 |
| 성능 메트릭 | 90% | 리포트 파싱 | 실측값 기반 분석 |
| 전략 추천 | 75% | 종합 분석 | 위 항목 종합 |


## 데이터베이스 개요

### 기본 정보

| 항목 | 값 | 설명 |
|------|-----|------|
| 데이터베이스 이름 | FINANCE_CORE | 금융 핵심 업무 시스템 |
| Oracle 버전 | 19.0.0.0.0 | Enterprise Edition |
| 문자셋 | AL32UTF8 | UTF8 호환 |
| 인스턴스 수 | 2 (RAC) | 고가용성 RAC 구성 |

### 크기 및 리소스 정보

| 항목 | 값 | 설명 |
|------|-----|------|
| 전체 DB 크기 | 1,200.0 GB | 대규모 금융 데이터 |
| 물리 메모리 | 256.0 GB | 서버 총 메모리 |
| CPU 코어 수 | 16 | 물리 CPU 코어 |

### PL/SQL 오브젝트

| 오브젝트 유형 | 개수 | 변환 난이도 | 설명 |
|-------------|------|------------|------|
| 패키지 | 45 | 🔴 높음 | 여러 프로시저/함수를 묶은 모듈 |
| 프로시저 | 350 | 🟠 중간 | 비즈니스 로직 처리 단위 |
| 함수 | 180 | 🟠 중간 | 값을 계산하여 반환하는 프로그램 단위 |
| 트리거 | 280 | 🟠 중간 | 이벤트 기반 자동 실행 |
| 타입 | 42 | 🟠 중간 | 사용자 정의 데이터 타입 |
| **총 PL/SQL 오브젝트 수** | **897** | - | 변환 대상 프로그램 오브젝트 총합 |
| **총 PL/SQL 라인 수** | **120,000** | - | 변환 작업량 산정의 기준 |

### 스키마 오브젝트

| 오브젝트 유형 | 개수 | 변환 방법 | 설명 |
|-------------|------|----------|------|
| 스키마 | 28 | SCT 자동 변환 | 데이터베이스 내 논리적 구분 단위 |
| 테이블 | 1,250 | SCT 자동 변환 | 실제 데이터가 저장되는 기본 단위 |
| 뷰 | 385 | 일부 수동 검토 | 가상 테이블 |
| 인덱스 | 2,850 | SCT 자동 변환 | 검색 속도 향상을 위한 구조 |


# 추천 전략

**Replatform (리플랫폼)** → RDS for SQL Server Enterprise

## Replatform 세부 전략 선택 가이드

| 옵션 | 설명 | 적합한 경우 | 관리 부담 |
|------|------|------------|----------|
| **EC2 Rehost** | EC2에서 SQL Server 직접 운영 | OS 커스터마이징 필요 | 🔴 높음 |
| **RDS Custom** | OS 접근 가능한 관리형 서비스 | OS 접근 필요 | 🟠 중간 |
| **RDS SQL Server** | 완전 관리형 서비스 | 표준 구성, 운영 부담 최소화 | 🟢 낮음 |

### 선택된 세부 전략: **RDS for SQL Server Enterprise**

**선택 이유:**
- PL/SQL 복잡도가 높아 (120,000줄) 오픈소스 전환 리스크 큼
- T-SQL과 PL/SQL의 문법 유사성 활용하여 변환 작업 효율화
- .NET 기반 애플리케이션과의 호환성 우수
- Multi-AZ 배포로 RAC 대체 가능
- License Included 모델로 라이선스 관리 간소화

## Replatform 선택 이유

| 조건 | 설명 |
|------|------|
| PL/SQL 복잡도 | 높음 (120,000줄, 897개 오브젝트) - 오픈소스 전환 리스크 큼 |
| RAC 구성 | 2 인스턴스 RAC → Multi-AZ로 고가용성 대체 |
| T-SQL 유사성 | PL/SQL → T-SQL 변환이 PL/pgSQL보다 용이한 패턴 다수 |
| DB Link | 8개 - Linked Server로 대체 가능 |
| 금융 규제 | 상용 DB의 기술 지원 및 감사 대응 용이 |


# 추천 근거

## PL/SQL 복잡도

### 분석 대상 오브젝트

| 오브젝트 타입 | 개수 | SQL Server 기본점수 |
|--------------|------|---------------------|
| 패키지 | 45개 | 4.5 |
| 프로시저 | 350개 | 2.0 |
| 함수 | 180개 | 2.5 |
| 트리거 | 280개 | 3.5 |
| 타입 | 42개 | 3.0 |
| **합계** | **897개** | - |

### 타겟 DB별 복잡도 비교

| 항목 | SQL Server | PostgreSQL |
|------|------------|------------|
| 평균 복잡도 | 4.25 (중간) | 5.10 (중간) |
| 최대 복잡도 | 7.80 (높음) | 8.50 (매우 높음) |
| 고난이도 | 12개 / 45개 (≥5.0) | 18개 / 45개 (≥5.0) |

> **분석**: SQL Server가 PostgreSQL 대비 평균 복잡도가 낮고 고난이도 오브젝트도 적습니다. PL/SQL → T-SQL 변환이 더 효율적입니다.

### 감지된 Oracle 특화 기능

| Oracle 기능 | 사용 횟수 | 변환 영향도 |
|------------|----------|------------|
| NESTED TABLE | 8회 | 🔴 높음 |
| REF CURSOR | 15회 | 🟠 중간 |
| BULK COLLECT | 25회 | 🟠 중간 |
| AUTONOMOUS_TRANSACTION | 5회 | 🔴 높음 |
| PIPELINED | 3회 | 🔴 높음 |
| DBMS_SCHEDULER | 8회 | 🟠 중간 |
| DBMS_LOB | 12회 | 🟡 낮음 |
| UTL_FILE | 4회 | 🟠 중간 |

### 감지된 외부 의존성

| 패키지/함수 | 사용 횟수 | 대체 방법 |
|------------|----------|----------|
| DBMS_SCHEDULER | 8회 | SQL Server Agent |
| DBMS_LOB | 12회 | VARBINARY(MAX) / FILESTREAM |
| UTL_FILE | 4회 | xp_cmdshell / BULK INSERT |
| DBMS_OUTPUT | 6회 | PRINT / RAISERROR |
| DBMS_LOCK | 3회 | sp_getapplock / sp_releaseapplock |
| DBMS_STATS | 5회 | UPDATE STATISTICS |
| DBMS_AQ | 2회 | Service Broker |
| UTL_HTTP | 3회 | CLR Integration / 애플리케이션 레이어 |

### 변환 가이드

| Oracle 기능 | SQL Server 대체 방법 |
|------------|---------------------|
| AUTONOMOUS_TRANSACTION | 별도 연결 또는 OPENROWSET |
| NESTED TABLE | TABLE 변수 또는 임시 테이블 |
| REF CURSOR | CURSOR 변수 (유사) |
| BULK COLLECT | INSERT...SELECT / MERGE |
| PIPELINED | 테이블 반환 함수 (TVF) |
| DBMS_SCHEDULER | SQL Server Agent |
| DB Link | Linked Server |
| SEQUENCE | SEQUENCE (SQL Server 2012+) |

## 작업 예상 시간

### 분석 대상

| 항목 | 값 |
|------|-----|
| PL/SQL 오브젝트 수 | 897개 |
| PL/SQL 총 라인 수 | 120,000줄 |

### 예상 작업 시간 (4인 팀 기준)

| 작업 방식 | 예상 기간 | 비고 |
|----------|----------|------|
| AI 활용 (4인) | 34~56일 (1.7~2.8개월) | 오브젝트당 4시간 × 30~50% |

## ⚠️ 추가 고려사항

### 애플리케이션 종속성
| 확인 항목 | 설명 | 영향도 |
|----------|------|--------|
| DB Link 사용 | 8개 DB Link → Linked Server 재설계 필요 | 🔴 높음 |
| Pro*C/SQLJ | 임베디드 SQL 사용 시 애플리케이션 전면 수정 필요 | 🔴 높음 |
| OCI 직접 호출 | Oracle Call Interface → ODBC/OLEDB 드라이버 교체 | 🟠 중간 |
| 트랜잭션 관리 | 분산 트랜잭션(XA) → MSDTC 전환 | 🟠 중간 |

### 운영 환경
| 확인 항목 | 설명 | 영향도 |
|----------|------|--------|
| 배치 작업 | DBMS_SCHEDULER → SQL Server Agent 전환 | 🟠 중간 |
| 모니터링 도구 | Oracle 전용 모니터링 → SQL Server 모니터링 도구 | 🟢 낮음 |
| 백업/복구 절차 | RMAN → SQL Server 네이티브 백업 | 🟠 중간 |
| HA/DR 구성 | RAC → Multi-AZ + Always On 가용성 그룹 | 🟠 중간 |


# 최종 난이도 판정

**종합 난이도**: 높음 (High)

## 난이도 점수 산정 기준

| 평가 항목 | 현재 값 | 획득 점수 |
|----------|--------|----------|
| PL/SQL 평균 복잡도 | 4.25 (중간) | 1점 |
| PL/SQL 코드량 | 120,000줄 (매우 많음) | 3점 |
| 고난이도 비율 (≥5.0) | 12/45개 (26.7%) | 1점 |
| 고난이도 절대 개수 | 12개 (적음) | 0점 |
| 패키지 개수 | 45개 (보통) | 0점 |
| RAC 구성 | 2 인스턴스 | 1점 |
| **합계** | - | **6점** |

> **난이도 등급 기준**: 0~2점 낮음, 3~5점 중간, 6~8점 높음, 9점 이상 매우 높음

## 판정 요약

- 🟡 PL/SQL 평균 복잡도가 중간 수준 (4.25)
- ⚠️ PL/SQL 코드량이 많음 (120,000줄)
- ⚠️ 고난이도 오브젝트 12개 존재 (복잡도 ≥5.0)
- ⚠️ RAC 2 인스턴스 → Multi-AZ 전환 필요
- ⚠️ DB Link 8개 재설계 필요


# 대안 전략

## 대안 1: RDS for Oracle SE2 (Replatform)

### 장점
- 코드 변경 최소화 (PL/SQL 그대로 유지)
- 마이그레이션 위험 최소
- 빠른 전환 가능 (2~4주)
### 단점
- Oracle 라이선스 비용 지속 발생
- SE2는 RAC 미지원 (Single 인스턴스만)
- 장기적 비용 절감 효과 제한적
### 고려사항
- ✅ 빠른 전환이 최우선인 경우
- ⚠️ 장기적 TCO 절감이 중요하다면 SQL Server 전환 권장

## 대안 2: Aurora PostgreSQL (Refactoring)

### 장점
- Oracle 라이선스 비용 완전 제거
- PL/pgSQL로 대부분의 PL/SQL 로직 변환 가능
- 고가용성 (3AZ 6카피 복제)
### 단점
- PL/SQL → PL/pgSQL 변환 작업량 큼 (120,000줄)
- 고난이도 오브젝트 18개 (SQL Server 대비 6개 더 많음)
- 금융 규제 대응 시 오픈소스 DB 검증 필요
### 고려사항
- ✅ 장기적 비용 절감이 최우선인 경우
- ⚠️ 변환 기간 2~3개월 추가 소요 예상
- ⚠️ 금융 규제 환경에서 오픈소스 DB 승인 필요


# 위험 요소 및 완화 방안

## 위험 1: RAC 2 인스턴스 → Multi-AZ 전환 시 아키텍처 변경

**카테고리**: operational

**심각도**: high

**완화 방안**: Multi-AZ 배포로 고가용성 확보, Read Replica로 읽기 분산, 애플리케이션 연결 로직 수정

## 위험 2: PL/SQL 120,000줄 → T-SQL 변환 작업량

**카테고리**: schedule

**심각도**: high

**완화 방안**: AWS SCT 자동 변환 + AI 도구 활용, 단계별 변환 및 검증, 고난이도 오브젝트 우선 처리

## 위험 3: DB Link 8개 → Linked Server 재설계

**카테고리**: technical

**심각도**: medium

**완화 방안**: Linked Server 구성으로 대체, 필요시 애플리케이션 레벨 연동

## 위험 4: 금융 규제 환경에서 DB 엔진 변경 승인

**카테고리**: compliance

**심각도**: medium

**완화 방안**: SQL Server는 금융권에서 널리 사용되는 상용 DB로 규제 대응 용이, 사전 감사 대응 문서 준비

## 위험 5: 월말 결산 피크 시 성능 보장

**카테고리**: performance

**심각도**: medium

**완화 방안**: 부하 테스트로 피크 성능 검증, 필요시 인스턴스 스케일업


# 인스턴스 추천

## 권장 인스턴스 타입

- **인스턴스 타입**: db.r6i.8xlarge
- **vCPU**: 32
- **메모리**: 256 GB
- **적용 여유율**: 20%

### 추천 근거

**AWR/Statspack 분석 결과**:
- 평균 CPU 사용률: 55.8%
- 평균 I/O 부하: 4,300 IOPS
- 평균 메모리 사용량: 198.5 GB

**피크 부하 예상 (P99 기준 +20% 여유율)**:
- 예상 피크 CPU: 106.2% (스케일업 검토 필요)
- 예상 피크 메모리: 265.0 GB

## 인스턴스 추천 비교

| 구분 | 현재 서버 사양 기반 | SGA 권장사항 기반 |
|------|---------------------|-------------------|
| **인스턴스 타입** | db.r6i.8xlarge | db.r6i.4xlarge |
| **vCPU** | 32 | 16 |
| **메모리** | 256 GB | 128 GB |

### SGA 분석 결과

| 항목 | 값 |
|------|-----|
| **현재 SGA 크기** | 160 GB |
| **권장 SGA 크기** | 192 GB |
| **SGA 증가율** | 20.0% |

### RAC 필요성 평가

**RAC 필요성 평가**: 현재 2 인스턴스 RAC 구성. 피크 CPU 사용률(88.5%)이 높아 단일 인스턴스로는 부족할 수 있습니다. Multi-AZ + Read Replica 구성을 권장하며, 필요시 db.r6i.12xlarge로 스케일업을 검토하세요.

### 고가용성 구성 권장사항

**고가용성 구성**: Multi-AZ 배포로 RAC 대체를 권장합니다. 읽기 분산이 필요한 경우 Read Replica를 추가하세요. SQL Server Enterprise의 Always On 가용성 그룹 기능을 활용할 수 있습니다.


---

## 요약

| 항목 | 내용 |
|------|------|
| **추천 전략** | RDS for SQL Server Enterprise (Replatform) |
| **예상 기간** | 34~56일 (AI 도구 활용, 4인 팀) |

### 핵심 이점
- T-SQL과 PL/SQL 유사성으로 변환 효율화
- Multi-AZ로 RAC 대체 가능
- License Included 모델로 라이선스 관리 간소화
- 금융 규제 환경에서 상용 DB 기술 지원 활용

### 주요 위험
- PL/SQL 120,000줄 변환 작업량
- RAC → Multi-AZ 아키텍처 전환
- DB Link 8개 재설계
