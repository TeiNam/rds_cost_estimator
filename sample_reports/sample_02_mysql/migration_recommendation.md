# SIMPLE_CRM Oracle 마이그레이션 전략 리포트

---

## 리포트 개요

**추천 타겟**: Aurora MySQL

**추천 신뢰도**: 75%

**소스 데이터베이스**: SIMPLE_CRM (Oracle 19.0.0.0.0)

**분석 소스**: AWR, PL/SQL

**분석 일시**: 2026-01-31

---

## 목차

### Part 1: 의사결정 정보
1. [분석 신뢰도](#-분석-신뢰도-및-데이터-가용성)
2. [데이터베이스 개요](#데이터베이스-개요)
3. [Oracle 기능 사용 현황](#oracle-기능-사용-현황)
4. [추천 전략 및 근거](#추천-전략)
5. [최종 난이도 판정](#최종-난이도-판정)
6. [대안 전략 비교](#대안-전략)
7. [위험 요소 및 완화 방안](#위험-요소-및-완화-방안)

### Part 2: 기술 상세 (부록)
- [인스턴스 추천](#인스턴스-추천)
- [분석 메트릭](#분석-메트릭-부록)


## 📊 분석 신뢰도 및 데이터 가용성

> 이 섹션은 분석 결과의 신뢰도와 그 근거를 설명합니다.

### 종합 신뢰도: 🟢 **75%** (높음)

```
[███████████████░░░░░] 75%
```

### 분석 모드: **DB_ONLY**

**DB-Only 모드**는 서비스 SQL 없이 PL/SQL과 DBCSI 데이터만으로 분석합니다. 서비스 SQL은 ORM 기반 단순 CRUD로 가정합니다. JPA, Hibernate, MyBatis 등 ORM을 사용하는 환경에서 유효한 분석입니다.

### 데이터 가용성

| 데이터 소스 | 상태 | 파일 수 | 신뢰도 기여 |
|------------|------|--------|------------|
| 서비스 SQL | ❌ 미포함 | - | 추정값 사용 |
| PL/SQL | ✅ 포함 | 4개 | 75% |
| DBCSI (AWR) | ✅ 포함 | - | 90% |

### 항목별 신뢰도 상세

| 분석 항목 | 신뢰도 | 데이터 출처 | 설명 |
|----------|--------|------------|------|
| SQL 복잡도 | 60% | 없음 (추정값) | ORM 기반 단순 CRUD 가정 |
| PL/SQL 복잡도 | 75% | 파일 분석 | 실측값 기반 분석 |
| 성능 메트릭 | 90% | 리포트 파싱 | 실측값 기반 분석 |
| 전략 추천 | 80% | 종합 분석 | 위 항목 종합 |

### 신뢰도 판단 근거

📊 **분석 모드**: DB_ONLY - 서비스 SQL 데이터가 없어 SQL 복잡도는 추정값을 사용합니다. ORM 기반 애플리케이션에서는 유효한 분석입니다.

⚠️ **SQL 분석**: 데이터 없음 - ORM 기반 단순 CRUD로 가정 (신뢰도 60%)

✅ **PL/SQL 분석**: 4개 파일 분석 완료 (신뢰도 75%)

✅ **성능 메트릭**: AWR 데이터 분석 완료 (신뢰도 90%)


### 💡 신뢰도 향상 방법

- 📁 **서비스 SQL 추가**: 소스 코드에서 .sql 파일을 수집하거나, ORM 매핑 파일에서 SQL을 추출하면 신뢰도가 15-20% 향상됩니다.


## 데이터베이스 개요

### 기본 정보

| 항목 | 값 | 설명 |
|------|-----|------|
| 데이터베이스 이름 | SIMPLE_CRM | 마이그레이션 대상 DB를 식별하는 이름입니다 |
| Oracle 버전 | 19.0.0.0.0 | 현재 사용 중인 Oracle 버전입니다 |
| 문자셋 | AL32UTF8 | UTF8 계열로 Aurora와 호환됩니다 |
| 인스턴스 수 | 1 (단일 인스턴스) | 단일 서버로 마이그레이션이 상대적으로 단순합니다 |

### 크기 및 리소스 정보

| 항목 | 값 | 설명 |
|------|-----|------|
| 전체 DB 크기 | 85.0 GB | 소규모 DB로 빠른 마이그레이션이 가능합니다 |
| 물리 메모리 | 32.0 GB | 현재 서버의 총 메모리입니다. Aurora 인스턴스 선택 시 참고합니다 |
| CPU 코어 수 | 2 | 현재 서버의 CPU 코어 수입니다. AWS vCPU 산정 기준이 됩니다 |

### PL/SQL 오브젝트

| 오브젝트 유형 | 개수 | 변환 난이도 | 설명 |
|-------------|------|------------|------|
| 패키지 | 5 | 🔴 높음 | 여러 프로시저/함수를 묶은 모듈. 가장 복잡한 변환 대상 |
| 프로시저 | 25 | 🟠 중간 | 특정 작업을 수행하는 프로그램 단위 |
| 함수 | 12 | 🟠 중간 | 값을 계산하여 반환하는 프로그램 단위 |
| **총 PL/SQL 오브젝트 수** | **42** | - | 변환 대상 프로그램 오브젝트 총합 |
| **총 PL/SQL 라인 수** | **15,000** | - | 변환 작업량 산정의 기준 |

### 스키마 오브젝트

| 오브젝트 유형 | 개수 | 변환 방법 | 설명 |
|-------------|------|----------|------|
| 스키마 | 5 | SCT 자동 변환 | 데이터베이스 내 논리적 구분 단위 |
| 테이블 | 120 | SCT 자동 변환 | 실제 데이터가 저장되는 기본 단위 |
| 뷰 | 45 | 일부 수동 검토 | 가상 테이블. 복잡한 뷰는 검토 필요 |
| 인덱스 | 180 | SCT 자동 변환 | 검색 속도 향상을 위한 구조 |

# 추천 전략

**Refactoring (리팩토링)** → Aurora MySQL


# 추천 근거

### 이 섹션의 목적

마이그레이션 전략 추천의 **근거가 되는 분석 데이터**를 보여줍니다.
SQL/PL-SQL 코드의 복잡도를 분석하여 변환 난이도와 예상 작업량을 산정합니다.

## PL/SQL 복잡도

> **PL/SQL이란?** Oracle 데이터베이스에 저장된 **프로그램 코드**입니다.
> 비즈니스 로직, 데이터 처리 규칙 등이 포함되어 있으며,
> 마이그레이션 시 타겟 DB 문법으로 **변환이 필요**합니다.

### 분석 대상 오브젝트

| 오브젝트 타입 | 개수 | PostgreSQL 기본점수 | MySQL 기본점수 |
|--------------|------|-------------------|----------------|
| 패키지 | 5개 | 4.0 | 5.0 |
| 프로시저 | 25개 | 2.5 | 3.5 |
| 함수 | 12개 | 2.0 | 3.0 |
| **합계** | **42개** | - | - |

> **기본 점수**: 오브젝트 타입별 최소 복잡도입니다. 실제 복잡도는 코드 분석을 통해 추가됩니다. MySQL은 PL/SQL 미지원으로 애플리케이션 이관 페널티가 포함되어 점수가 높습니다.

### 타겟 DB별 복잡도 비교

> **왜 두 타겟을 비교하나요?**
> PostgreSQL과 MySQL은 Oracle 호환성이 다릅니다.
> 복잡도가 낮은 타겟이 변환 작업이 더 쉽습니다.

| 항목 | PostgreSQL | MySQL |
|------|------------|-------|
| 평균 복잡도 | 1.46 (매우 낮음) | 2.13 (낮음) |
| 최대 복잡도 | 1.65 (매우 낮음) | 3.02 (낮음) |
| 고난이도 | 0개 / 4개 (≥5.0) | 0개 / 8개 (≥7.0) |

> **분석**: MySQL 타겟이 PostgreSQL보다 복잡도가 **0.67** 높습니다. PostgreSQL이 Oracle 호환성이 더 좋아 변환이 용이합니다.

> **차이 발생 원인**: MySQL은 PL/SQL을 지원하지 않아 저장 프로시저를 애플리케이션 코드로 이관해야 합니다. 반면 PostgreSQL의 PL/pgSQL은 Oracle PL/SQL과 문법이 유사하여 대부분의 코드를 직접 변환할 수 있습니다. 이로 인해 MySQL 변환 시 기본 점수와 애플리케이션 이관 페널티가 추가됩니다.

> **복잡도 산정 공식**: 기본 점수 + 코드 복잡도 + Oracle 특화 기능 + 비즈니스 로직 + 변환 난이도

> **정규화 공식**: `정규화 점수 = 원점수 / 최대점수 × 10`
>
> - PostgreSQL 최대점수: 13.5점, MySQL 최대점수: 18.0점
> - 정규화를 통해 타겟 DB 간 복잡도를 동일 척도(0~10)로 비교 가능
> - 예: PostgreSQL 원점수 6.75 → 정규화 5.0, MySQL 원점수 9.0 → 정규화 5.0 (동일 난이도)


## 작업 예상 시간

> **이 섹션의 목적**: PL/SQL 오브젝트 수와 코드량을 기반으로
> 마이그레이션 작업에 필요한 **예상 기간**을 산정합니다.
> AI 도구 활용을 전제로 하며, 실제 기간은 팀 역량에 따라 달라질 수 있습니다.

### 분석 대상

| 항목 | 값 |
|------|-----|
| PL/SQL 오브젝트 수 | 42개 |
| PL/SQL 총 라인 수 | 15,000줄 |

### 예상 작업 시간 (4인 팀 기준)

| 작업 방식 | 예상 기간 | 비고 |
|----------|----------|------|
| AI 활용 (4인) | 2~3일 | 오브젝트당 4시간 × 30~50% |

> **산정 기준**: 4인 팀 전원이 AI 도구(Amazon Q Developer, Bedrock)를 활용하는 것을 전제로 합니다. AI 미사용 시 약 2~3배 기간이 소요될 수 있습니다.

> **참고**: 예상 시간은 코드 복잡도, 팀 숙련도, 테스트 범위에 따라 달라질 수 있습니다.

## ⚠️ 추가 고려사항

> **이 섹션의 목적**: DB 분석만으로는 파악할 수 없는 항목들입니다.
> 마이그레이션 계획 수립 시 **반드시 사전 확인**이 필요합니다.
> 누락 시 프로젝트 일정과 비용에 큰 영향을 줄 수 있습니다.

### 애플리케이션 종속성
| 확인 항목 | 설명 | 영향도 |
|----------|------|--------|
| DB Link 사용 | 외부 DB 연결이 있는 경우 연결 방식 재설계 필요 | 🔴 높음 |
| Pro*C/SQLJ | 임베디드 SQL 사용 시 애플리케이션 전면 수정 필요 | 🔴 높음 |
| OCI 직접 호출 | Oracle Call Interface 사용 시 드라이버 교체 필요 | 🟠 중간 |
| 연결 풀 설정 | 커넥션 풀 라이브러리 및 설정 변경 필요 | 🟢 낮음 |
| 트랜잭션 관리 | 분산 트랜잭션(XA) 사용 여부 확인 | 🟠 중간 |

### 운영 환경
| 확인 항목 | 설명 | 영향도 |
|----------|------|--------|
| 배치 작업 | 스케줄러(DBMS_SCHEDULER, cron) 연동 방식 변경 | 🟠 중간 |
| 모니터링 도구 | Oracle 전용 모니터링 도구 대체 필요 | 🟢 낮음 |
| 백업/복구 절차 | RMAN 기반 백업 스크립트 재작성 필요 | 🟠 중간 |
| HA/DR 구성 | Data Guard → Aurora 복제 방식으로 변경 | 🟠 중간 |
| 보안 정책 | TDE, VPD 등 Oracle 보안 기능 대체 방안 검토 | 🔴 높음 |

### 인력 및 일정
| 확인 항목 | 설명 | 영향도 |
|----------|------|--------|
| 팀 역량 | PostgreSQL/MySQL 경험 수준에 따라 학습 기간 추가 | 🟠 중간 |
| 테스트 범위 | 회귀 테스트 케이스 수 및 자동화 수준 | 🔴 높음 |
| 다운타임 허용 | 서비스 중단 가능 시간에 따라 전환 전략 결정 | 🔴 높음 |
| 롤백 계획 | 전환 실패 시 원복 절차 및 소요 시간 | 🔴 높음 |

### 비용 요소
| 확인 항목 | 설명 |
|----------|------|
| 라이선스 비용 | Oracle 라이선스 계약 종료 시점 및 위약금 |
| 인프라 비용 | AWS 인스턴스, 스토리지, 네트워크 비용 |
| 인건비 | 내부 인력 투입 또는 외부 컨설팅 비용 |
| 교육 비용 | 운영팀 대상 신규 DB 교육 |

> 💡 **권장사항**: 위 항목들을 체크리스트로 활용하여 마이그레이션 착수 전 사전 점검을 수행하세요.

# 최종 난이도 판정

> **이 섹션의 목적**: 여러 분석 지표를 종합하여 마이그레이션의
> **전체 난이도**를 판정합니다. 점수가 높을수록 변환 작업이 복잡합니다.

**종합 난이도**: 낮음 (Low)

## 난이도 점수 산정 기준

| 평가 항목 | 기준 | 점수 | 현재 값 | 획득 점수 |
|----------|------|------|--------|----------|
| PL/SQL 평균 복잡도 | <3.0: 0점, 3.0~5.0: 1점, 5.0~7.0: 2점, ≥7.0: 3점 | 0~3 | 1.46 (낮음 (<3.0)) | 0점 |
| PL/SQL 코드량 | <10K: 0점, 10K~50K: 1점, 50K~100K: 2점, ≥100K: 3점 | 0~3 | 15,000줄 (중간 (10K~50K)) | 1점 |
| 고난이도 비율 (≥5.0) | <10%: 0점, 10~30%: 1점, ≥30%: 2점 | 0~2 | 0/4개 (0.0%) | 0점 |
| 고난이도 절대 개수 | <20: 0점, 20~50: 1점, 50~100: 2점, ≥100: 3점 | 0~3 | 0개 (적음 (<20개)) | 0점 |
| 패키지 개수 | <50: 0점, 50~100: 1점, ≥100: 2점 | 0~2 | 5개 (적음 (<50)) | 0점 |
| **합계** | - | **0~13** | - | **1점** |

> **난이도 등급 기준**: 0~2점 낮음, 3~5점 중간, 6~8점 높음, 9점 이상 매우 높음

## 복잡도 점수 산정 기준

> **복잡도 점수란?** 코드 변환 난이도를 0~10 척도로 수치화한 것입니다.
> 점수가 높을수록 변환에 더 많은 노력이 필요합니다.

### PostgreSQL 타겟

| 항목 | 최대 점수 | 설명 |
|------|----------|------|
| 구조적 복잡도 | 2.5 | JOIN, 서브쿼리, CTE 등 |
| Oracle 특화 기능 | 3.0 | CONNECT BY, ROWNUM 등 |
| 함수/표현식 | 2.0 | 분석 함수, 변환 함수 등 |
| 데이터 볼륨 | 0.8 | 쿼리 길이 기반 |
| 실행 복잡도 | 1.0 | ORDER BY, GROUP BY 등 |
| 변환 난이도 | 4.5 | 타겟 DB 미지원 기능 |
| **최대 총점** | **13.5** | - |

### MySQL 타겟

| 항목 | 최대 점수 | 설명 |
|------|----------|------|
| 구조적 복잡도 | 4.5 | JOIN, 서브쿼리, CTE 등 |
| Oracle 특화 기능 | 3.0 | CONNECT BY, ROWNUM 등 |
| 함수/표현식 | 2.5 | 분석 함수, 변환 함수 등 |
| 데이터 볼륨 | 1.0 | 쿼리 길이 기반 |
| 실행 복잡도 | 2.5 | ORDER BY, GROUP BY 등 |
| 변환 난이도 | 4.5 | 타겟 DB 미지원 기능 |
| **최대 총점** | **18.0** | - |

> **고난이도 임계값**: PostgreSQL ≥5.0 (최대점수의 37%), MySQL ≥7.0 (최대점수의 39%)

## 예상 작업 기간 요약

| 항목 | 값 |
|------|-----|
| 변환 대상 오브젝트 | 42개 |
| 예상 기간 (4인, AI 활용) | 2~3일 |

## 판정 요약

- ✅ PL/SQL 평균 복잡도가 낮아 변환이 용이함
- ✅ 고난이도 오브젝트 없음 (복잡도 ≥5.0)

# 인스턴스 추천

> **이 섹션의 목적**: AWR/Statspack 성능 데이터를 기반으로
> Aurora MySQL에 적합한 **AWS 인스턴스 타입**을 추천합니다.
> 실제 운영 전 부하 테스트로 검증이 필요합니다.

## 권장 인스턴스 타입

- **인스턴스 타입**: db.r6i.xlarge
- **vCPU**: 4
- **메모리**: 32 GB
- **적용 여유율**: 50%

### 추천 근거

**AWR/Statspack 분석 결과**:
- 평균 CPU 사용률: 15.5%
- 평균 I/O 부하: 39.0 IOPS
- 평균 메모리 사용량: 24.8 GB

**피크 부하 예상 (P99 기준 +20% 여유율)**:
- 예상 피크 CPU: 18.6%
- 예상 피크 I/O: 46.8 IOPS
- 예상 피크 메모리: 29.8 GB

**추천 근거**: 예상 피크 메모리(29.8GB)를 고려하여 **db.r6i.xlarge** (vCPU 4, 메모리 32GB)를 추천합니다. Aurora MySQL의 자동 스케일링 기능으로 피크 시 추가 확장이 가능합니다.

> **여유율 산정 기준**: 엔진 변경(Oracle→Aurora)으로 인한 성능 불확실성을 고려하여 50% 여유율 적용

## 인스턴스 추천 비교

SGA 권장사항을 반영한 인스턴스와 현재 서버 사양 기반 인스턴스를 비교합니다.

| 구분 | 현재 서버 사양 기반 | SGA 권장사항 기반 |
|------|---------------------|-------------------|
| **인스턴스 타입** | db.r6i.xlarge | db.r6i.xlarge |
| **vCPU** | 4 | 4 |
| **메모리** | 32 GB | 32 GB |

### SGA 분석 결과

| 항목 | 값 |
|------|-----|
| **현재 SGA 크기** | 0.0 GB |
| **권장 SGA 크기** | 0.0 GB |
| **SGA 증가율** | 25.0% |

> **참고**: SGA 권장사항은 AWR 리포트의 Buffer Pool Advisory 데이터를 기반으로 
> Physical Reads가 더 이상 감소하지 않는 최적 지점을 분석한 결과입니다.
> 권장 SGA가 현재 SGA보다 큰 경우, 메모리 증설을 통해 I/O 성능을 개선할 수 있습니다.

### 참고사항

- 위 인스턴스는 현재 성능 메트릭을 기반으로 한 권장 사항입니다
- 실제 마이그레이션 시 부하 테스트를 통해 최적 사이즈를 결정하시기 바랍니다
- Aurora의 경우 자동 스케일링 기능을 활용하여 유연하게 확장 가능합니다


# 대안 전략

> **이 섹션의 목적**: 추천 전략 외에 고려할 수 있는 **다른 옵션**을 제시합니다.
> 각 전략의 장단점을 비교하여 조직 상황에 맞는 최적의 선택을 할 수 있습니다.

## 대안 1: replatform

### 장점
- AWS 클라우드로 가장 빠르고 안정적인 전환 (4-6주)
- 기존 PL/SQL 코드 100% 유지, 코드 변경 없음
- Oracle 기능 및 성능 그대로 유지
- 마이그레이션 위험 최소화
- 운영팀 재교육 불필요
### 단점
- Oracle 라이선스 비용 지속 발생 (BYOL 또는 LI)
- Multi-AZ 구성 시 라이선스 비용 2배
- Oracle 21c EE는 BYOL 라이선스 필수
- 장기적으로 클라우드 네이티브 이점 제한적
### 고려사항
- ✅ 빠른 클라우드 전환이 최우선인 경우 적합
- ✅ 마이그레이션 리스크를 최소화하고 싶은 경우
- ✅ 향후 2단계로 오픈소스 전환을 계획하는 경우
- ⚠️ 장기 비용 절감보다 안정성이 중요한 경우에만 선택

## 대안 2: refactor_postgresql

### 장점
- PL/pgSQL로 PL/SQL 로직 DB 레벨 유지 가능
- 기존 Aurora MySQL과 동일 플랫폼 (Aurora) 사용으로 관리 포인트 통일
- 복잡한 쿼리 및 BULK 연산 성능 우수
- Oracle과 높은 호환성으로 변환 용이
### 단점
- MySQL 대비 약간 높은 비용
- PL/SQL 변환 작업 필요
- PostgreSQL 학습 곡선 존재
### 고려사항
- ✅ 이미 Aurora를 사용 중이라면 플랫폼 통일 가능
- ✅ PL/SQL 로직을 데이터베이스에 유지하고 싶은 경우
- ✅ BULK 연산이 많은 경우 (10개 이상)
- ⚠️ MySQL 대비 변환 공수는 비슷하나 DB 로직 유지 가능



# 위험 요소 및 완화 방안

> **이 섹션의 목적**: 마이그레이션 과정에서 발생할 수 있는 **위험 요소**를 식별하고,
> 각 위험에 대한 **완화 방안**을 제시합니다. 사전에 대비하여 프로젝트 실패를 방지합니다.

> **심각도 설명**
> - **high**: 프로젝트 일정/비용에 큰 영향, 즉시 대응 필요
> - **medium**: 일부 영향 예상, 계획적 대응 필요
> - **low**: 영향 적음, 모니터링 수준

## 위험 1: 패키지 5개의 모듈화 구조를 애플리케이션에서 재구현 필요

**카테고리**: technical

**심각도**: high

**완화 방안**: 서비스 레이어 설계, 마이크로서비스 패턴 검토

## 위험 2: PL/SQL 4개를 애플리케이션 코드로 전면 이관 필요

**카테고리**: technical

**심각도**: medium

**완화 방안**: 단계적 이관 계획 수립, 애플리케이션 개발팀 참여 필수

## 위험 3: 운영팀 MySQL 학습 및 운영 체계 구축 필요

**카테고리**: operational

**심각도**: low

**완화 방안**: AWS 교육 프로그램 활용, 운영 가이드 문서화, 단계적 인수인계



---

# 📎 부록: 기술 상세 정보

> 이 섹션은 기술팀을 위한 상세 정보입니다. 의사결정에는 위 섹션의 정보로 충분합니다.

## 분석 원본 데이터

> 본문에 표시된 수치의 원본 데이터입니다.

| 항목 | 값 | 비고 |
|------|-----|------|
| 평균 SQL 복잡도 | 0.00 | 0~10 척도 |
| 평균 PL/SQL 복잡도 | 1.46 | 0~10 척도 |
| 고난이도 SQL | 0개 | ≥5.0 기준 |
| 고난이도 PL/SQL | 0개 | ≥5.0 기준 |
| BULK 연산 | 0개 | 성능 영향 |
| 평균 CPU | 15.5% | AWR 기준 |
| 평균 I/O | 39.0 IOPS | AWR 기준 |
| 평균 메모리 | 24.8 GB | AWR 기준 |

## 요약

| 항목 | 내용 |
|------|------|
| **추천 전략** | Aurora MySQL (Refactoring) |
| **예상 기간** | 9-12주 (AI 도구 활용) |

### 핵심 이점
- 오픈소스 기반으로 라이선스 비용 절감
- AI 도구 활용으로 개발 기간 단축 (9-12주, 전통적 방식 대비 50% 단축)
- 클라우드 네이티브 아키텍처 활용

### 주요 위험
- PL/SQL을 애플리케이션 레벨로 이관 필요
- BULK 연산 성능 저하 가능성
- 복잡한 JOIN 쿼리 성능 최적화 필요

> 상세 내용은 본문의 각 섹션을 참조하세요.

### Refactoring 접근 방식 선택 가이드

Refactoring은 두 가지 접근 방식으로 진행할 수 있습니다:

| 접근 방식 | 개요 | 기간 | 난이도 | 적합한 경우 |
|----------|------|------|--------|------------|
| **Code-level Refactoring** | 기존 데이터 모델 유지, PL/SQL을 애플리케이션으로 변환 | 9-12주 | 중간 | 빠른 마이그레이션, 현재 모델 유지 |
| **Data Model Refactoring** | 데이터 모델 리버스 엔지니어링 후 재설계 | 16-24주 | 높음~매우 높음 | 성능/설계 문제 해결, 장기 유지보수성 |

> **권장**: 대부분의 경우 **Code-level Refactoring**을 먼저 진행하고, 마이그레이션 완료 후 필요시 점진적으로 데이터 모델을 개선하는 것을 권장합니다.