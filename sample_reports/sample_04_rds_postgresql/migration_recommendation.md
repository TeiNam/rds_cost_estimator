# LOGISTICS_DW Oracle 마이그레이션 전략 리포트

---

## 리포트 개요

**추천 타겟**: RDS for PostgreSQL

**추천 신뢰도**: 80%

**소스 데이터베이스**: LOGISTICS_DW (Oracle 19.0.0.0.0)

**분석 소스**: AWR, PL/SQL

**분석 일시**: 2026-02-20

---

## 목차

### Part 1: 의사결정 정보
1. [분석 신뢰도](#-분석-신뢰도-및-데이터-가용성)
2. [데이터베이스 개요](#데이터베이스-개요)
3. [Oracle 기능 사용 현황](#oracle-기능-사용-현황)
4. [추천 전략 및 근거](#추천-전략)
5. [최종 난이도 판정](#최종-난이도-판정)
6. [대안 전략 비교](#대안-전략)
7. [위험 요소 및 완화 방안](#위험-요소-및-완화-방안)

### Part 2: 기술 상세 (부록)
- [인스턴스 추천](#인스턴스-추천)
- [분석 메트릭](#분석-메트릭-부록)


## 📊 분석 신뢰도 및 데이터 가용성

> 이 섹션은 분석 결과의 신뢰도와 그 근거를 설명합니다.

### 종합 신뢰도: 🟢 **80%** (높음)

```
[████████████████░░░░] 80%
```

### 분석 모드: **DB_ONLY**

**DB-Only 모드**는 서비스 SQL 없이 PL/SQL과 DBCSI 데이터만으로 분석합니다.

### 데이터 가용성

| 데이터 소스 | 상태 | 파일 수 | 신뢰도 기여 |
|------------|------|--------|------------|
| 서비스 SQL | ❌ 미포함 | - | 추정값 사용 |
| PL/SQL | ✅ 포함 | 3개 | 80% |
| DBCSI (AWR) | ✅ 포함 | - | 90% |

### 항목별 신뢰도 상세

| 분석 항목 | 신뢰도 | 데이터 출처 | 설명 |
|----------|--------|------------|------|
| SQL 복잡도 | 60% | 없음 (추정값) | ORM 기반 단순 CRUD 가정 |
| PL/SQL 복잡도 | 80% | 파일 분석 | 실측값 기반 분석 |
| 성능 메트릭 | 90% | 리포트 파싱 | 실측값 기반 분석 |
| 전략 추천 | 85% | 종합 분석 | 위 항목 종합 |


## 데이터베이스 개요

### 기본 정보

| 항목 | 값 | 설명 |
|------|-----|------|
| 데이터베이스 이름 | LOGISTICS_DW | 물류 데이터 웨어하우스 |
| Oracle 버전 | 19.0.0.0.0 | Enterprise Edition |
| 문자셋 | AL32UTF8 | UTF8 계열로 PostgreSQL과 호환 |
| 인스턴스 수 | 1 (단일 인스턴스) | 단일 서버 구성 |

### 크기 및 리소스 정보

| 항목 | 값 | 설명 |
|------|-----|------|
| 전체 DB 크기 | 750.0 GB | 중규모 데이터 웨어하우스 |
| 물리 메모리 | 128.0 GB | 서버 총 메모리 |
| CPU 코어 수 | 8 | 물리 CPU 코어 |

### PL/SQL 오브젝트

| 오브젝트 유형 | 개수 | 변환 난이도 | 설명 |
|-------------|------|------------|------|
| 패키지 | 12 | 🟠 중간 | 여러 프로시저/함수를 묶은 모듈 |
| 프로시저 | 85 | 🟡 낮음~중간 | 비즈니스 로직 처리 단위 |
| 함수 | 42 | 🟡 낮음~중간 | 값을 계산하여 반환하는 프로그램 단위 |
| 트리거 | 48 | 🟡 낮음 | 이벤트 기반 자동 실행 |
| **총 PL/SQL 오브젝트 수** | **187** | - | 변환 대상 프로그램 오브젝트 총합 |
| **총 PL/SQL 라인 수** | **35,000** | - | 변환 작업량 산정의 기준 |


# 추천 전략

**Replatform (리플랫폼)** → RDS for PostgreSQL

## Replatform 세부 전략 선택 가이드

| 옵션 | 설명 | 적합한 경우 | 관리 부담 |
|------|------|------------|----------|
| **RDS PostgreSQL** | 완전 관리형 서비스 | 표준 구성, 운영 부담 최소화 | 🟢 낮음 |
| **Aurora PostgreSQL** | 고성능 관리형 서비스 | 높은 가용성, 자동 스케일링 필요 | 🟢 낮음 |

### 선택된 세부 전략: **RDS for PostgreSQL**

**선택 이유:**
- DW 워크로드에 PostgreSQL의 고급 분석 쿼리 기능 적합
- PL/SQL → PL/pgSQL 변환이 비교적 용이 (문법 유사성 높음)
- Oracle 라이선스 비용 완전 제거로 TCO 40~60% 절감
- Window Function, CTE, LATERAL JOIN 등 Oracle 호환 기능 풍부

## Replatform 선택 이유

| 조건 | 설명 |
|------|------|
| PL/SQL 복잡도 | 중간 수준 (35,000줄) - 변환 가능한 범위 |
| 단일 인스턴스 | RAC 미사용으로 전환 복잡도 낮음 |
| DW 워크로드 | PostgreSQL의 분석 쿼리 최적화 기능 활용 가능 |
| DB Link | 2개로 적은 편 - 외부 연결 재설계 부담 낮음 |


# 추천 근거

## PL/SQL 복잡도

### 분석 대상 오브젝트

| 오브젝트 타입 | 개수 | PostgreSQL 기본점수 |
|--------------|------|-------------------|
| 패키지 | 12개 | 4.0 |
| 프로시저 | 85개 | 2.0 |
| 함수 | 42개 | 2.0 |
| 트리거 | 48개 | 3.5 |
| **합계** | **187개** | - |

### 타겟 DB별 복잡도

| 항목 | PostgreSQL |
|------|------------|
| 평균 복잡도 | 3.85 (중간) |
| 최대 복잡도 | 6.50 (높음) |
| 고난이도 | 3개 / 12개 (≥5.0) |

### 감지된 Oracle 특화 기능

| Oracle 기능 | 사용 횟수 | 변환 영향도 |
|------------|----------|------------|
| REF CURSOR | 3회 | 🟠 중간 |
| BULK COLLECT | 5회 | 🟠 중간 |
| DBMS_SCHEDULER | 2회 | 🟠 중간 |
| UTL_FILE | 1회 | 🟠 중간 |

### 변환 가이드

| Oracle 기능 | PostgreSQL 대체 방법 |
|------------|---------------------|
| REF CURSOR | REFCURSOR 타입 (유사) |
| BULK COLLECT | ARRAY 또는 FOR LOOP |
| DBMS_SCHEDULER | pg_cron 확장 |
| UTL_FILE | COPY, pg_read_file() 또는 외부 스크립트 |

## 작업 예상 시간

### 분석 대상

| 항목 | 값 |
|------|-----|
| PL/SQL 오브젝트 수 | 187개 |
| PL/SQL 총 라인 수 | 35,000줄 |

### 예상 작업 시간 (4인 팀 기준)

| 작업 방식 | 예상 기간 | 비고 |
|----------|----------|------|
| AI 활용 (4인) | 8~12일 (0.4~0.6개월) | 오브젝트당 4시간 × 30~50% |


# 최종 난이도 판정

**종합 난이도**: 낮음 (Low)

## 난이도 점수 산정 기준

| 평가 항목 | 현재 값 | 획득 점수 |
|----------|--------|----------|
| PL/SQL 평균 복잡도 | 3.85 (중간) | 1점 |
| PL/SQL 코드량 | 35,000줄 (보통) | 1점 |
| 고난이도 비율 (≥5.0) | 3/12개 (25.0%) | 1점 |
| 고난이도 절대 개수 | 3개 (적음) | 0점 |
| 패키지 개수 | 12개 (적음) | 0점 |
| **합계** | - | **3점** |

> **난이도 등급 기준**: 0~2점 낮음, 3~5점 중간, 6~8점 높음, 9점 이상 매우 높음

## 판정 요약

- 🟢 PL/SQL 평균 복잡도가 중간 수준 (3.85)
- 🟢 PL/SQL 코드량이 적당함 (35,000줄)
- 🟢 단일 인스턴스 구성으로 전환 복잡도 낮음
- 🟡 고난이도 오브젝트 3개 존재 (복잡도 ≥5.0)


# 대안 전략

## 대안 1: RDS for Oracle SE2 (Replatform)

### 장점
- 코드 변경 최소화 (PL/SQL 그대로 유지)
- 마이그레이션 위험 최소
- 빠른 전환 가능 (2~4주)
### 단점
- Oracle 라이선스 비용 지속 발생
- 장기적 비용 절감 효과 제한적
### 고려사항
- ✅ 빠른 전환이 최우선인 경우
- ⚠️ 장기적 TCO 절감이 중요하다면 PostgreSQL 전환 권장

## 대안 2: Aurora PostgreSQL

### 장점
- 자동 스케일링, 고가용성 (3AZ 6카피 복제)
- Serverless v2 옵션으로 비용 최적화
- PostgreSQL 호환으로 동일한 변환 작업
### 단점
- RDS PostgreSQL 대비 약간 높은 비용
- 클러스터 스토리지 비용 구조 상이
### 고려사항
- ✅ 높은 가용성이 필요한 경우
- ✅ 읽기 부하 분산이 필요한 경우


# 위험 요소 및 완화 방안

## 위험 1: PL/SQL → PL/pgSQL 변환 시 일부 Oracle 특화 기능 미지원

**카테고리**: technical

**심각도**: medium

**완화 방안**: AWS SCT로 자동 변환 후 수동 검토, AI 도구 활용하여 변환 가속

## 위험 2: DW 쿼리 성능 차이 발생 가능

**카테고리**: performance

**심각도**: medium

**완화 방안**: PostgreSQL 쿼리 최적화 (파티셔닝, 인덱스 전략), 부하 테스트 수행

## 위험 3: DB Link 2개 재설계 필요

**카테고리**: operational

**심각도**: low

**완화 방안**: postgres_fdw 확장 또는 애플리케이션 레벨 연동으로 대체


# 인스턴스 추천

## 권장 인스턴스 타입

- **인스턴스 타입**: db.r6i.4xlarge
- **vCPU**: 16
- **메모리**: 128 GB
- **적용 여유율**: 20%

### 추천 근거

**AWR/Statspack 분석 결과**:
- 평균 CPU 사용률: 35.2%
- 평균 I/O 부하: 1,170 IOPS
- 평균 메모리 사용량: 95.5 GB

**피크 부하 예상 (P99 기준 +20% 여유율)**:
- 예상 피크 CPU: 75.4%
- 예상 피크 메모리: 127.0 GB

## 인스턴스 추천 비교

| 구분 | 현재 서버 사양 기반 | SGA 권장사항 기반 |
|------|---------------------|-------------------|
| **인스턴스 타입** | db.r6i.4xlarge | db.r6i.2xlarge |
| **vCPU** | 16 | 8 |
| **메모리** | 128 GB | 64 GB |

### SGA 분석 결과

| 항목 | 값 |
|------|-----|
| **현재 SGA 크기** | 80 GB |
| **권장 SGA 크기** | 96 GB |
| **SGA 증가율** | 20.0% |


---

## 요약

| 항목 | 내용 |
|------|------|
| **추천 전략** | RDS for PostgreSQL (Replatform) |
| **예상 기간** | 8~12일 (AI 도구 활용, 4인 팀) |

### 핵심 이점
- Oracle 라이선스 비용 완전 제거 (TCO 40~60% 절감)
- PostgreSQL의 고급 분석 쿼리 기능으로 DW 워크로드 최적화
- 단일 인스턴스 구성으로 전환 복잡도 낮음

### 주요 위험
- PL/SQL → PL/pgSQL 변환 작업 필요 (35,000줄)
- DW 쿼리 성능 튜닝 필요
